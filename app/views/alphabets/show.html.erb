<h1 class="text-2xl font-bold mb-4"><%= @alphabet.name %></h1>

<%= link_to "Back to Alphabets", alphabets_path, class: "text-blue-600 hover:underline" %>

<div class="flex flex-wrap gap-4 mt-4">
  <% @alphabet.letters.each do |letter| %>
    <div class="mt-6 p-4 border rounded">
      <h2 class="text-xl font-semibold mb-2"><%= letter.character.upcase %></h2>
      <%= link_to "View Letter", alphabet_letter_path(@alphabet, letter), class: "text-blue-600 hover:underline" %>
      <% if letter.sound.attached? %>
        <div class="mt-3">
          <button
            type="button"
            class="inline-flex items-center rounded border border-gray-300 px-3 py-1 text-sm font-semibold text-gray-700 hover:bg-gray-50"
            data-audio-id="letter-audio-<%= letter.id %>"
          >
            Listen
          </button>
          <audio id="letter-audio-<%= letter.id %>" src="<%= url_for(letter.sound) %>" class="hidden"></audio>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<script>
  (() => {
    document.querySelectorAll("[data-audio-id]").forEach((button) => {
      button.addEventListener("click", () => {
        const audio = document.getElementById(button.dataset.audioId);
        if (audio) audio.play();
      });
    });
  })();
</script>
